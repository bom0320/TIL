세션 기반 인증 vs 토큰 기반 인증 
===
두 개의 인증 방식이 어떻게 다르고, 어떤 상황에서 사용하는지 알아보도록 하자

## 세션 기반 인증이란?
**서버가 사용자의 로그인 상태를 기억하는 방식**이다. 

### 동작 원리

#### 1. 로그인 요청
- 사용자가 로그인하면 서버는 **세션 ID** 를 생성하고 **세션 데이터를 서버 메모리나 데이터베이스에 저장**한다. 

#### 2. 세션 ID 발급:
- 서버는 세션 ID 를 **쿠키**에 담아 **프론트엔드(브라우저)**에 반환한다.

#### 3. 다음 요청:
- 이후 사용자가 요청을 보낼 때 브라우저나 클라이언트는 **세션 ID를 자동으로 쿠키에 담아**서버에 보낸다. 

#### 4. 서버 확인:
- 서버는 세션 ID 를 확인해서 **사용자의 로그인 상태를 판단**한다.

### 👀 실제 요청 흐름
1. **로그인 :** 서버가 세션 ID(입장권)를 쿠키에 담아 프론트엔드에게 준다.
2. **다음 요청 :** 사용자는 요청 시 쿠키(세션 ID) 를 자동으로 서버에 보낸다.
3. **검사 :** 서버는 쿠키의 세션 ID 를 확인해 로그인 상태를 인증하고 요청을 처리한다.

## 세션 기반 인증의 특징
- **서버가 상태를 저장**한다. 로그인한 사용자의 세션 정보를 **서버 메모리나 DB**에 저장한다. 
- **쿠키를 사용** 세션 ID 는 보통 **쿠키**에 담겨서 클라이언트와 서버 간에 전달된다.
- **로그아웃 시 세션 삭제** 서버에서 세션 정보를 삭제하면 해당 사용자는 더 이상 인증되지 않는다.

---


## 토큰 기반 인증이란?
**서버가 상태를 저장하지 않고, 토큰을 이용해 인증하는 방식**이다.

### 동작 원리

#### 1. 로그인 요청
- 사용자가 로그인하면 서버는 **토큰** (예: JWT)을 생성해 클라이언트에 반환한다. 

#### 2. 토큰 저장
- 프론트엔드는 이 **토큰을 로컬 저장소나 메모리**에 저장해 둔다. 

#### 3. 다음 요청
- 이후 요청을 보낼 때 프론트엔드는 토큰 **HTTP 헤더**(보통 `Authorization 헤더`)에 포함시켜 보낸다. 

#### 4. 서버 확인
- 서버는 토큰의 **유효성**을 확인하고 요청을 처리한다. 

### 토큰 기반 인즈으이 특징
- **서버는 상태를 저장하지 않음 :** 서버가 사용자의 정보를 따로 기억하지 않는다. 
- **토큰 자체가 정보 :** 토큰에는 사용자의 정보가 담겨 있어서 서버가 별도로 세션 데이터를 저장할 필요가 없다.
- **스케일링에 유리 :** 서버를 여러 대로 나누는 경우(분산 서버) 토큰 기반 인증이 더 효율적이다. 

### **세션 기반 인증 vs 토큰 기반 인증 비교**

| **항목** | **세션 기반 인증** | **토큰 기반 인증** |
| --- | --- | --- |
| **상태 저장** | 서버가 세션 상태를 저장 | 서버는 상태를 저장하지 않음 |
| **저장 위치** | 서버(DB, 메모리) + 쿠키 | 클라이언트(LocalStorage, 메모리 등) |
| **인증 정보 전달** | 쿠키에 세션 ID를 담아서 전달 | HTTP 헤더에 토큰을 담아서 전달 |
| **확장성(스케일링)** | 서버 부담이 커져 확장하기 어려움 | 서버 부담이 적고 확장에 유리함 |
| **로그아웃 처리** | 서버에서 세션을 삭제 | 토큰을 클라이언트에서 삭제해야 함 |
| **보안** | 쿠키 도난 가능성, CSRF 공격에 노출될 수 있음 | 토큰 유출 시 보안 위험 (추가 보안 필요) |
---

### 예제 요약

#### 1. 세션 기반 인증:
서버에 `세션 ID` 를 저장하고, 프론트엔드(클라이언트)는 이를 쿠키를 통해 보냄
- **"서버가 상태를 기억해요!"**

#### 2. 토큰 기반 인증:
- 클라이언트가 받은 토큰을 서버로 보내서 인증, 서버는 상태를 기억하지 않음
- "토큰이 내 신분증이예요!"

### **어떤 상황에서 사용하나요?**

- **세션 기반 인증**:
    - 소규모 시스템, 서버 상태 관리가 필요한 경우
    - 예: 회사 내부 시스템, 소규모 웹사이트
- **토큰 기반 인증**:
    - 확장성이 필요한 대규모 시스템, RESTful API나 모바일 앱
    - 예: 소셜 로그인 (Google, Facebook), 분산 서버 환경
