[React] 데이터 흐름_03
===
상태 끌어오기에 대해서 좀 더 자세히 알아보자. 이 개념은 **React 에서 상태 관리와 데이터 흐름**에 대한 중요한 내용이다. "상태 끌어올리기" 와 "단방향 데이터 흐름"을 이해하기 쉽게 풀어서 설명해보겠다.

## 1. React 의 기본 데이터 흐름
React 에서는 데이터가 **항상 부모 컴포넌트에서 자식 컴포넌트로만** 전달되는 **단방향(top-down) 데이터 흐름**을 따르고 있다.
- 즉, **상위 컴포넌트(부모)**가 어떤 상태(state) 를 관리하고, 그 상태를 **하위 컴포넌트(자식)** 에 **props 로 전달** 해 주는 방식이다.

하지만, 때로는 **여러 컴포넌트가 같은 상태를 공유해야 하는 경우**가 있다. 이때 상태를 가장 가까운 **공통된 부모 컴포넌트**에 두는 것을 **상태 끌어올리기**라고 한다.

## 2. 상태 끌어올리기(Lifting State Up)
상태 끌어올리기는 **공통된 부모 컴포넌트로 상태를 올려서 관리하는 방법**이다. 여러 하위 컴포넌트가 같은 상태를 필요로 할 때, 상태를 각각의 컴포넌트에 두면 상태가 중복되고 일관성이 없어지기 때문에, 상태를 가장 가까운 공통 부모 컴포넌트로 올려서 한 곳에서 관리하는것!!

## 3. 역방향 데이터 흐름처럼 보이는 경우
React 에서는 상태가 항상 부모에서 자식으로 전달되지만, 하위 컴포넌트에서 상위 컴포넌트의 상태를 변경하고 싶을 때가 있다. 예를 들어, 버튼을 클릭하거나 체크박스를 선택할 때, 이 이벤트는 하위 컴포넌트에서 발생하지만, 그 상태는 부모 컴포넌트에서 관리하고 있다.

이런 경우 **상위 컴포넌트의 상태를 변경하는 함수**(예를 들어, `setState`) 를 **하위 컴포넌트에 props 로 전달**하는 것이다. 그러면 하위 컴포넌트가 그 함수(콜백)를 호출해서 상위 컴포넌트의 상태를 변경할 수 있다.

이 방법을 사용하면, 데이터는 여전히 **상위에서 하위로 흐르는 단방향 데이터 흐름**을 유지하면서, 하위에서 발생한 이벤트를 통해 사우이 컴포넌트의 상태를 업데이트 할 수 있다. 

## 4. 예시로 설명

#### 예시 코드:
```jsx
// 부모 컴포넌트
const Parent = () => {
  const [count, setCount] = useState(0);  // 상태는 부모 컴포넌트에서 관리

  // 상태를 변경하는 함수(콜백)를 자식 컴포넌트에 전달
  return <Child count={count} increment={() => setCount(count + 1)} />;
};

// 자식 컴포넌트
const Child = ({ count, increment }) => {
  return (
    <div>
      <p>현재 카운트: {count}</p>
      <button onClick={increment}>카운트 증가</button>
    </div>
  );
};
```

#### 이 코드에서: 
- `Parent` 컴포넌트는 `count` 라는 상태를 관리하고 있다.
- `Child` 컴포넌트는 `count` 값을 받아서 표시하고 있다.
- **상위 컴포넌트**인 `Parent` 는 **상태를 변경하는 함수**인 `increment`를 **props 로 전달**해서 하위 컴포넌트인 `Child` 에서 이 함수를 호출 할 수 있게 한다.
- `Child` 컴포넌트에서 버튼을 클릭하면 `increment()` 가 호출되면서 **부모 컴포넌트의 상태가 변경**된다. 이 상태 변경이 완료되면 React 가 **자동으로 화면을 다시 렌더링**해서 새로운 카운트 값을 보여준다.

## 5. 단방향 데이터 흐름을 유지하는 이유
이 방식은 여전히 **단방향 데이터 흐름**울 유지한다. 왜냐하면:
- 상태는 **부모 컴포넌트**에서만 관리되고,
- 자식 컴포넌트는 **props 로 전달받은 데이터와 함수**를 사용할 뿐이다. 

데이터가 역방향으로 흐르는 것처럼 보이지만, 실제로는 하위 컴포넌트가 부모로부터 받은 콜백 함수를 호출해서 상위 컴포넌트의 상태를 바꾸는 것뿐이다.

### 요약:
- **상태 끌어올리기**는 여러 컴포넌트가 같은 상태를 사용할 때, 그 상태를 **가장 가까운 부모 컴포넌트로 올려서** 관리하는 방식이다.
- 하위 컴포넌트에서 발생한 이벤트가 부모 컴포넌트의 상태를 바꿀 때는, **부모 컴포넌트에서 상태를 변경하는 함수**를 하위 컴포넌트로 **props 로 전달**한다. 이렇게 하면 데이터 흐름이 역방향으로 보이지만, 실제로는 **단방향 데이터 흐름**을 유지 할 수 있다.