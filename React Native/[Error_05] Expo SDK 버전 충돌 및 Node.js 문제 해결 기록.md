05 Expo SDK 버전 충돌 및 Node.js 문제 해결 기록
===


###  문제가 됐던 것
---
- Node.js 버전 문제와 환경 변수 설정 충돌
- Expo CLI 의 레거시 지원 종료와 새로운 로컬 CLI 도입
- Expo SDK와 Node.js 간의 버전 호환성
- 종속성 충돌로 인한 패키지 설치 오류
---

결론적으로 말하자면, 이 모든게 동시에 얽이면서 생긴 문제였던거다... 즉, "다층적인 문제"였던 것

Node.js 경로가 환경 변수와 연결되지 않은 점 때문에 혼란이 생겼고, 터미널에서의 `node -v` 결과와 실제 설치 버전이 불일치 하면서 어디서 문제인지 확신하기 어려웠었다. 또한 Expo CLI 가 레거시와 로컬 CLI 로 나뉘면서 어떤 CLI 를 사용해야하는지도 명확히 알지 못했기 때문에 처음에는 더 막막했던 것 같다.

특히, 개발 초보인 나에겐 `npm WARN EBADENGINE`, `expo upgrade is not supported`, `Need to install the following packages` 와 같은 설명 없이 단순히 "이게 안돼"라고만 나오는 오류들은 그에 대한 원인을 찾기가 어려웠다.

### 왜 이런 일이 생겼을까?

#### 1. 빠르게 발전하는 기술 스택:
Expo, Node.js, npm 같은 도구들은 새로운 버전이 자주나오면서 기존방식이 빠르게 지원되지 않게 된다. 특히, Expo CLI 처럼 **레거시와 로컬 CLI** 로 나뉘는 경우, 사용자 입장에서는 혼란이 생길수 밖에 없다고 한다.

#### 2. 환경 설정의 민감함:
환경 변수는 하나만 잘못 설정돼도 프로그램에 잘못된 버전을 참조하게 된다. Node.js 같은 도구는 버전에 따라 동작이 달라질 수 있기 때문에 버전 호환이 중요하지만, 이 부분이 처음에는 잘 눈에 보이지 않는다.

#### 3. 의존성의 복잡함:
하나의 패키지를 업데이트했을 뿐인데, 그것과 연관된 다른 패키지들이 호환되지 않는 경우가 많다. 이로인해 **도미노처럼 오류가 연쇄적으로 발생**하는 경우가 생긴다.

#### 4. 오류 메시지의 불친절함:
오류 메시지가 "뭐가 문제다"라는 걸 명확히 알려주지 않으니까, 문제 해결 과정에서 시간을 더 많이 소비하게 된다. 특히 여러 문제들이 섞여 잇을 때는 원인을 파악하기 더 힘들어진다.

### 앞으로 비슷한 상황에서 유용한 팁

#### 1. 의존성 버전 확인:
- `package.json` 에 있는 의존성 버전을 정기적으로 확인하고 업데이트 하자
- `npx npm-check-updates` 를 사용하면 패키지 업데이트가 필요할 때 한눈에 볼 수 있다.

#### 2. 환경 변수 점검:
- Node.js, Java 등 다른 개발 도구를 설치할 때 항상 환경 변수를 확인하고, 필요 없는 경로는 삭제한다.
- `echo %PATH%` (Windows) 또는 `echo $PATH` (Mac/ Linux) 로 현재 경로를 쉽게 확인할 수 있다.

#### 3. 검색해보기:
- 대부분 오류는 **"현재 설정과 호환되지 않아서"** 발생하므로, 메시지를 구글에 검색하면 해결 방법이 거의 나온다.
- 차근히 메시지를 읽고 어떤 도수가 문제인지 파악하는 습관이 중요하다.

#### 4. 시뮬레이터 활용:
- Expo Go 앱에서 문제가 발생할 경우, ios 나 Android 시뮬레이터를 사용해 프로젝트를 실행해보는 것도 좋은 방법이다.
